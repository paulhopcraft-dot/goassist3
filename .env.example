# GoAssist v3.0 Environment Configuration
# Copy to .env and configure for your environment
# Reference: Ops-Runbook-v3.0.md Section 6.1

# ============================================
# API Configuration
# ============================================
API_HOST=0.0.0.0
API_PORT=8081
LOG_LEVEL=INFO
ENVIRONMENT=development

# ============================================
# Session Configuration (REQUIRED)
# ============================================
# Maximum concurrent sessions - GPU dependent
# RTX 4090: ~25, A100 40GB: ~50
MAX_CONCURRENT_SESSIONS=25
SESSION_IDLE_TIMEOUT_S=300

# ============================================
# LLM Configuration (REQUIRED)
# ============================================
# Options: vllm (self-hosted, e.g., Qwen), mock (testing)
LLM_ENGINE=vllm

# vLLM Configuration (when LLM_ENGINE=vllm)
# Example: Qwen/Qwen2.5-7B-Instruct on RunPod
LLM_MODEL_PATH=/workspace/models/llm/Qwen2.5-7B-Instruct
LLM_MAX_CONTEXT_TOKENS=8192
LLM_PREFIX_CACHING=true
LLM_VRAM_CAP_GB=20
LLM_BASE_URL=http://localhost:8000/v1

# ============================================
# ASR Configuration (REQUIRED)
# ============================================
ASR_MODEL_PATH=/workspace/models/asr/faster-whisper-base
VAD_ENGINE=silero

# Deepgram (optional - for cloud ASR)
# DEEPGRAM_API_KEY=your-api-key

# ============================================
# TTS Configuration (REQUIRED)
# ============================================
# Options: xtts-v2 (local), kyutai (local), mock (testing)
TTS_ENGINE=xtts-v2
TTS_MODEL_PATH=/workspace/models/tts/xtts-v2
AUDIO_PACKET_MS=20
AUDIO_OVERLAP_MS=5

# ============================================
# Animation Configuration (Profile B)
# ============================================
ANIMATION_ENABLED=true
ANIMATION_ENGINE=audio2face
ANIMATION_FALLBACK=lam
ANIMATION_DROP_IF_LAG_MS=120
ANIMATION_SLOW_FREEZE_MS=150

# Audio2Face gRPC (if using Audio2Face)
AUDIO2FACE_GRPC_HOST=localhost
AUDIO2FACE_GRPC_PORT=50051

# ============================================
# WebRTC Configuration
# ============================================
WEBRTC_STUN_SERVER=stun:stun.l.google.com:19302

# TURN server (required for production NAT traversal)
# WEBRTC_TURN_SERVER=turn:your-turn-server:3478
# WEBRTC_TURN_USERNAME=username
# WEBRTC_TURN_PASSWORD=password

# ============================================
# Database Configuration
# ============================================
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/goassist
REDIS_URL=redis://localhost:6379

# ============================================
# Observability
# ============================================
METRICS_ENABLED=true
METRICS_PORT=9464

# Alerting thresholds
ALERT_CRASH_LOOP_THRESHOLD=3
