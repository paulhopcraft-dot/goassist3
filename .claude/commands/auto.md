[{"type":"text","text":"<instructions>\n# /auto - Autonomous Work Mode (Toolkit v3.0)\n\nEnable autonomous operation with self-directed task execution.\n\n## Usage\n\n```bash\n/auto                    # Start autonomous mode (default: autonomous level)\n/auto guided             # Ask for major decisions only\n/auto full               # Full autonomy with auto-commit\n/auto status             # Show autonomy status\n/auto stop               # Stop autonomous mode\n```\n\n## Autonomy Levels\n\n| Level | Auto-Continue | Auto-Verify | Auto-Commit | Ask Before |\n|-------|--------------|-------------|-------------|------------|\n| guided | Yes | Yes | No | Major decisions |\n| autonomous | Yes | Yes | No | Nothing (reports results) |\n| full_auto | Yes | Yes | Yes | Nothing |\n\n## How It Works\n\n1. **Task Discovery**: Reads features.json to find incomplete tasks\n2. **Priority Ordering**: P0 > P1 > P2, respects dependencies\n3. **Auto-Execute**: Implements tasks one by one\n4. **Auto-Verify**: Runs /verify after each change\n5. **Learning**: Records outcomes to improve future decisions\n6. **Error Recovery**: Pauses after 3 consecutive errors\n\n## Implementation Steps\n\n1. Read `.claude/toolkit/autonomy.py` for controller\n2. Initialize with requested level\n3. Load features.json for task queue\n4. Enter work loop:\n   - Get next task\n   - Execute implementation\n   - Run verification\n   - Record outcome\n   - Continue or stop based on results\n\n## Work Loop\n\n```python\nwhile controller.should_continue():\n    task = controller.get_next_task()\n    if task:\n        # Implement task\n        result = implement_feature(task)\n        \n        # Auto-verify if enabled\n        if config.auto_verify:\n            run_verification()\n        \n        # Auto-commit if enabled\n        if config.auto_commit and result.success:\n            git_commit(task)\n        \n        # Record for learning\n        controller.record_outcome(task, result)\n```\n\n## Safety Guards\n\n- **Max Errors**: Stops after 3 consecutive errors\n- **P0 Pause**: Pauses on P0-BLOCKING issues for review\n- **No Destructive**: Never runs destructive git commands\n- **Verification**: Always verifies before marking complete\n\n## Example Session\n\n```\n> /auto\n\nAutonomy Mode: ENABLED (autonomous level)\n\nLoading task queue from features.json...\nFound 6 pending tasks (3 P1, 3 P2)\n\n[1/6] Implementing Phase 3: Animation base interface...\n  - Created src/animation/base.py\n  - Running verification... PASSED\n  - Learning: animation/base -> success (confidence: 0.8)\n\n[2/6] Implementing Audio2Face engine...\n  - Created src/animation/audio2face_engine.py  \n  - Running verification... PASSED\n  - Learning: audio2face -> success (confidence: 0.85)\n\n... continues autonomously ...\n\nSession Complete:\n  - Tasks completed: 6/6\n  - Success rate: 100%\n  - Duration: 45 minutes\n  - Learning patterns updated\n```\n\n</instructions>\n\n<arguments>$ARGUMENTS</arguments>\n"}]
